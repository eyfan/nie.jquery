(function(b){b.nie=b.nie||{};b.nie.pop=function(h){function a(){e.hide();b.nie.pop.overlay.hide()}function d(){if(!b.nie.pop.overlay)b(document.body).append('<iframe id="NIE-overlay" frameborder="0" scrolling="no"></iframe>'),b.nie.pop.overlay=b("#NIE-overlay");b.nie.pop.overlay.css({height:b(document).height()});b.nie.pop.overlay.show();e.find(".pop-content").css({width:c.width,height:c.height});var a=b(window).height()/2-e.height()/2+b(window).scrollTop();if(a<c.minTop)a=c.minTop;var i=b(window).width()/
2-e.width()/2+b(window).scrollLeft();if(i<c.minLeft)i=c.minLeft;e.show().animate({top:a,left:i})}function g(){for(var b in c.settings)f(b,c.settings[b]);e.find(".pop-close").click(a)}function f(b,a){typeof a=="string"&&e.find(".pop-"+b).html(a);typeof a=="object"&&e.find(".pop-"+b).empty().append(a)}var c=b.extend({el:".pop",url:"",video:"",events:{},settings:{},padding:10,width:"auto",height:"auto",minTop:0,minLeft:0},h||{}),e=b(c.el);return new function(){g();this.show=d;this.close=a;this.set=f;
this.attr=function(a,d){if(typeof a=="string"&&d!=null)c[a]=d;else if(typeof a=="string"&&d==null)return c[a];else typeof a=="object"&&b.extend(c,a)}}};b.fn.pop=function(h){var a=new b.nie.pop(h);this.each(function(){var a=b(this);a.attr("source",a.attr("href")).attr("href","#nothing")});this.click(function(d){if(this.tagName.toLowerCase()=="a"){var g=b(this).attr("source");b(d.target).attr("title")&&a.set("title",b(d.target).attr("title"));if(/#([0-9a-zA-Z-_]*)/.test(g))a.set("content",b(g).html());
else if(/\.(jpg|png|gif)$/.test(g)){var f=new Image;f.onload=function(){a.attr({width:f.width,height:f.height});a.show();a.set("content",f)};f.src=g;a.set("content","")}else{var d=a.attr("width")=="auto"?500:a.attr("width"),c=a.attr("height")=="auto"?400:a.attr("height");a.set("content",'<iframe src="'+g+'" width="'+d+'" frameborder="0" height="'+c+'" allowtransparency="true"></iframe>')}a.show()}});return a}})(jQuery);
