(function(b){nie.util.bigUrs=nie.util.bigUrs||{data:[],create:function(){var a={unionStats:function(c){(function(){var e=a.getVal("username");c?b.include("http://union.netease.com/sys_js/pre_related.js",function(){netease_union_pre_related(e)}):b.include("http://union.netease.com/sys_js/pre_related.js",function(){netease_union_pre_related(e,2)})})()},aHref:"javascript:void(0);"};a.aData={href:a.aHref,target:"_self"};a.tips={username:{txt:"\u5982 name@example.com","class":"inp-tips"}};a.type=1;a.isShowCap=
!1;a.userNameType=0;a.progress={loadID:0,loadCap:0,chkUser:0,verCap:0,submit:0};a.domainReg=/^([\w-\.]+)@([\w-]+(?:\.[\w-]+){1,3})$/;a.regData={username:String,mailUrl:String,is163Mail:!1};a.mail={"163.com":[2,1,1,1],"qq.com":[2,0,1],"sina.com":[2,0,1],"126.com":[2,1,1,1],"vip.qq.com":[2,0,1],"yahoo.com.cn":[2,0,0],"yahoo.com":[2,0,0],"yahoo.cn":[2,0,0],"sohu.com":[2,0,0],"gmail.com":[1,0,0],"hotmail.com":[1,0,0],"yeah.net":[2,1,0,1],"sina.cn":[2,0,0],"live.com":[2,0,0],"sogou.com":[2,0,0],"139.com":[1,
0,0],"wo.com.cn":[2,0,0],"21cn.com":[2,0,0],"vip.163.com":[1,1,0],"vip.126.com":[1,1,0],"188.com":[2,1,0],"foxmail.com":[1,0,0]};a.sendMail=function(){var b=a.regData;b.is163Mail||a.get("sendActiveMail","userName="+b.username,function(){var b=nie.util.bigUrs.data[a.dataID].sendMailResult;b&&b.status&&b.info&&alert(b.info)})};a.r=function(){return(new Date).getMilliseconds()};a.server="http://weburs.ku.163.com/";a.serverPath=a.server+"quickReg/";a.get=function(c,e,h){b.include(a.serverPath+c+"?output=js&ver=3&dataID="+
a.dataID+"&id="+a.id+"&promark="+a.promark+"&"+e+"&"+a.r()+"&.js",h)};a.get_ssl=function(c,e,h){b.include("https://reg.nie.163.com/web/quick/"+c+"?output=js&ver=3&dataID="+a.dataID+"&id="+a.id+"&promark="+a.promark+"&"+e+"&"+a.r()+"&.js",h)};a.id=null;a.dataID=nie.util.bigUrs.data.length;nie.util.bigUrs.data.push({});a.form=b(".NIE-quickReg");a.showCaptcha=!1;a.hasTouch=!1;a.result={};a.stats={regTime:!1,monitor:!1,log:!0,pv:!1,clickSugRegBtn:!1,uvID:function(){var c=b.cookie("nie.util.bigUrs.uvID");
c||(c=a.r(),b.cookie("nie.util.bigUrs.uvID",c,{expires:1,path:"/",domain:nie.config.site+".163.com"}));return c}()};a.$img=function(){var a=b(new Image);a.bind("readystatechange",function(){}).bind("abort",function(){});return a};a.runStats=function(b,e){if(a.stats[b]){var h=function(b,c){a.$img().attr("src","http://click.ku.163.com/urs_stats?"+["promark="+a.promark,"type="+b,"code="+c,"r="+a.r()].join("&"))};switch(b){case "clickSugRegBtn":a.form.find(".sugRegBtn").click(function(){h("clickSugRegBtn")});
break;default:h(b,e)}}};a.promark="";a.capSize={height:32};a.msgID={msg:"NIE-quickReg-msg",title:"NIE-quickReg-msg-title",closeBtn:"NIE-quickReg-closeBtn",bg:"NIE-quickReg-msg-bg",con:"NIE-quickReg-msg-con",reVerCap:"NIE-reVerImg",reVerInp:"NIE-reVerInp"};a.msgSize={large:{w:490,h:270},small:{w:320,h:160},reVer:{w:240,h:230},current:{}};a.msgO={msg:function(){return b("#"+a.msgID.msg)},title:function(){return b("#"+a.msgID.title)},closeBtn:function(){return b("#"+a.msgID.closeBtn)},bg:function(){return b("#"+
a.msgID.bg)},con:function(){return b("#"+a.msgID.con)},reVerCap:function(){return b("#"+a.msgID.reVerCap)},reVerInp:function(){return b("#"+a.msgID.reVerInp)}};a.setUserType=function(b){a.userNameType=b;a.$(b?".qr-username":".qr-createEmail").addClass("qrHide");a.$(b?".qr-createEmail":".qr-username").removeClass("qrHide")};a.getUrl=function(){var b=nie.util.bigUrs.data[a.dataID].result.reDirectUrl;b!=null&&(b+=(b.indexOf("?")>0?"&":"?")+"username="+a.getVal("username"));return b};a.getMsgHTML=function(){var c=
a.regData,c="<div class='not163MailBox'><h1>\u611f\u8c22\u6ce8\u518c\uff01\u8bf7\u7acb\u5373\u6fc0\u6d3b\u5e10\u53f7\u3002</h1><h3>\u8bf7\u60a8\u767b\u5f55\u90ae\u7bb1 <b>"+c.username+"</b> \u6839\u636e\u786e\u8ba4\u90ae\u4ef6\u64cd\u4f5c\u5373\u53ef\u3002</h3>"+(c.mailUrl?"<h2><a class='btn' href='"+c.mailUrl+"' target='_blank'>\u7acb\u5373\u67e5\u770b\u90ae\u4ef6</a></h2>":"<h2>\u8bf7\u7acb\u5373\u67e5\u6536\u9a8c\u8bc1\u90ae\u4ef6</h2>")+"<ul class='tips'><li>\u8fd8\u6ca1\u6709\u6536\u5230\u9a8c\u8bc1\u90ae\u4ef6\uff1f<ol><li>\u5c1d\u8bd5\u5230\u5e7f\u544a\u90ae\u4ef6\u3001\u5783\u573e\u90ae\u4ef6\u76ee\u5f55\u91cc\u627e\u627e\u770b\uff1b</li><li>\u518d\u6b21<a href='"+
a.aHref+"' target='_self' class='sendMailBtn'>\u53d1\u9001\u6ce8\u518c\u9a8c\u8bc1\u90ae\u4ef6</a>\uff1b</li><li>\u5982\u679c\u91cd\u53d1\u6ce8\u518c\u9a8c\u8bc1\u90ae\u4ef6\u4f9d\u7136\u6ca1\u6709\u6536\u5230\uff0c\u8bf7<a class='reReg' target='_self' href='"+a.aHref+"'>\u91cd\u65b0\u6ce8\u518c</a>\u3002</li></ol></li></ul></div>";b(".not163MailBox a.sendMailBtn").live("click",a.sendMail);b(".not163MailBox a.reReg").live("click",function(){window.location.reload()});return c};a.clearMsg=function(){a.msgO.con().empty()};
a.showMsg=function(c){if(typeof c=="object"){var e=function(a){return typeof c[a]!="undefined"?c[a]:null},h=e("result"),r=e("url"),w=e("confirmFn"),s=e("closeBtnFn"),u=e("username"),B=e("is163Mail");e("mailUrl");var C=e("msg"),n=e("status"),e=e("reVer"),m=b(window),x=m.width(),v="_self",m={top:(m.height()-a.msgSize.current.h)/2+m.scrollTop(),left:(x-a.msgSize.current.w)/2+m.scrollLeft(),width:a.msgSize.current.w};a.msgO.bg().length==0?b("<div>",{id:a.msgID.bg,css:{top:0,left:0,width:x,height:b(document).height()}}).appendTo(b(document.body)):
a.msgO.bg().show();a.msgO.msg().length==0?(b("<div>",{id:a.msgID.msg,css:m,html:'<div id="'+a.msgID.title+'">\u6ce8\u518c\u6e38\u620f\u5e10\u53f7</div><a id="'+a.msgID.closeBtn+'" href="'+a.aHref+'">X</a><div id="'+a.msgID.con+'"></div>'}).appendTo(b(document.body)),a.msgO.closeBtn().live("click",function(){a.runStats("log",111);a.hideMsg();b.isFunction(s)&&s()})):(a.msgO.msg().css(m),a.clearMsg());a.t=0;a.msgO.msg().show();h&&r!=null?(v="_blank",r+=(r.indexOf("?")>0?"&":"?")+"username="+u):r=a.aHref;
a.showCaptcha=!1;if(h!=null){var o=a.msgO.con();o.removeClass("right error reVer");h&&!B&&n==202?(o.html(a.getMsgHTML()),b(".not163MailBox").attr("id","not163Mail")):(u=function(){b("<a>",{href:r,target:v,text:"\u786e \u8ba4","class":"btn",click:function(){a.runStats("log",110);a.hideMsg();b.isFunction(w)&&w()}}).appendTo(o)},h?(o.addClass("right").html("<p class='info'>\u6ce8\u518c\u6210\u529f\uff01</p>"),u()):e?(o.addClass("reVer").html("<p class='reVer-l1'>\u53ea\u5dee\u4e00\u6b65\u5c31\u5b8c\u6210\u4e86\uff01<br>\u8bf7\u60a8\u518d\u8f93\u5165\u4e00\u6b21\u9a8c\u8bc1\u7801\u4ee5\u5b8c\u6210\u6ce8\u518c\uff1a<br><input id='"+
a.msgID.reVerInp+"' /><br><span id='NIE-reVerImg'></span></p><p class='reVer-l2'>\u770b\u4e0d\u6e05\u695a <a href='"+a.aHref+"' id='NIE-reVerBtn'>\u6362\u4e00\u4e2a</a></p><p class='reVer-l3'><a id='NIE-reVerSubmit' href='"+a.aHref+"' class='btn'>\u5b8c\u6210\u6ce8\u518c</a></p>"),a.load_reVerCap(),b("#NIE-reVerBtn").click(a.load_reVerCap),b("#NIE-reVerSubmit").click(function(){a.send(!0);a.runStats("log",201)}),a.runStats("log",200)):(o.addClass("error").html("<p class='info'>\u51fa\u9519\u4e86\uff01</p><p class='reason'>"+
C+"</p>"),u()))}}};a.load_reVerCap=function(){a.msgO.reVerCap().empty();a.$img().css({width:205,height:30}).click(a.load_reVerCap).load(function(){a.msgO.reVerCap().append(b(this))}).error(function(){}).attr("src",a.serverPath+"Img?pAnti=1&id="+a.id+"&promark="+a.promark+"&"+a.r())};a.loginFn=function(){};a.reBindEvt=function(a,b){a.unbind("blur").blur(b)};a.hideMsg=function(){a.msgO.bg().hide();a.msgO.msg().hide()};a.regComplete=a.showMsg;a.$=function(b){return a.form.find(b)};a.getO=function(b,
e){var h=null;if(e||!/^(password|repassword)$/.test(b))h=a.$((b=="idtype"?"select":"input")+"[name="+b+"]");return h};a.getVal=function(c,e){var h=a.getO(c,e);return h?b.trim(h.val()):null};a.expVer={};a.init=function(){var c={username:{},createEmail:{},password:{},repassword:{},promark:{},captcha:{}},e=a.$(".hideItem"),h=a.$(".captcha-wrap"),r=a.$(".suggestEmail"),w=r.find("ul"),s=0,u=!1,B=[],C=[],n,m=!0,x,v,o,E,D,F=function(b){var t,i=!1,c=a.type==1?null:"\u5b57\u6bcd\u5f00\u5934\uff0c6\u523018\u4e2a\u5b57\u7b26\u3002\u5305\u62ec\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf\u3002";
/^[a-z]/i.test(b)?/[^a-z\d]$/i.test(b)?(t=c?c:"\u8bf7\u8f93\u5165\u5b57\u6bcd\u6216\u6570\u5b57\u7ed3\u5c3e\u3002",a.runStats("log",4)):/[^a-z\d_]/i.test(b)?(t=c?c:"\u8bf7\u8f93\u5165\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf\u3002",a.runStats("log",5)):/^[a-z\d_]{6,18}$/i.test(b)?i=!0:(t=c?c:"\u8bf7\u8f93\u51656\u523018\u4e2a\u5b57\u7b26\u3002",a.runStats("log",6)):(t=c?c:"\u8bf7\u8f93\u5165\u5b57\u6bcd\u5f00\u5934\u3002",a.runStats("log",3));return[i,t]},p;for(p in a.expVer)c[p]={};
inpFn=function(f,c,i){var e=typeof f=="string"?a.getO(f,!0):b(this),l=e.attr("name"),g=l=="password"||l=="repassword"?e.val():b.trim(e.val()),d=!1,f=!1,j,h=function(){v(l,e,d,j,m);b.isFunction(c)&&c()},m=x(l);m.removeClass("error right").addClass("loading");switch(l){case "activityid1":if(b.isFunction(a.expVer[l]))i=a.expVer[l](a.getVal(l)),d=i.pass,j=i.info;break;case "createEmail":u&&r.hide();var n=a.getVal("password",!0);if(g=="")j="\u8bf7\u8f93\u5165\u90ae\u4ef6\u5730\u5740\u3002",a.runStats("log",
1);else if(g==n)j="\u4e0d\u80fd\u4e0e\u5bc6\u7801\u76f8\u540c\u3002",a.runStats("log",8);else{var k=F(g);if(k[0]){if(i||a.progress.chkUser==0)f=!0,a.get("checkCreateEmail","userName="+g,function(){a.progress.chkUser=0;var f=nie.util.bigUrs.data[a.dataID].suggestEmail;switch(f.statusCode){case 200:w.html("<li class='title'><i></i>\u8be5\u90ae\u4ef6\u5730\u5740\u5df2\u88ab\u6ce8\u518c,\u8bf7\u9009\u62e9\u6216\u91cd\u65b0\u8f93\u5165...</li>");var c={"@163.com":163,"@126.com":126,"@yeah.net":"yeah"},
i=c[o.val()],t=0,l=0,k=function(f,c){l++;b("<li>",{Class:"choose",href:a.aHref,target:"_self",html:"<span><input type='radio' />"+f+"</span><em>"+c+"</em><i>(\u53ef\u4ee5\u6ce8\u518c)</i>",click:function(){a.runStats("log",7);u=!1;r.hide();setTimeout(function(){o.val(c);e.val(f).trigger("blur")},0)}}).hover(function(){b(this).addClass("hover")},function(){b(this).removeClass("hover")}).appendTo(w)};f[i].exist?(a.runStats("log",2),j="\u8be5\u90ae\u4ef6\u5730\u5740\u5df2\u662f\u7f51\u6613\u901a\u884c\u8bc1\u5e10\u6237\uff0c\u8bf7\u76f4\u63a5\u767b\u5f55\u3002",
b.each(c,function(){f[this.toString()].exist&&t++}),t<3?b.each(c,function(a){var b=this.toString();f[b].exist&&t++;i!=b&&f[b]&&k(f[b]&&!f[b].exist?g:f[b].name[0],a)}):b.each(c,function(a){var b=this.toString();if(f[b].name)for(var c=0,g=f[b].name.length;c<g;c++)k(f[b].name[c],a)}),l!=0&&(c=b("<li>").addClass("other"),b("<a>",a.aData).text("\u4f7f\u7528\u5176\u4ed6\u5e38\u7528\u7535\u5b50\u90ae\u7bb1>>").click(function(){D(0)}).appendTo(c),c.appendTo(w),r.slideDown("fast"),u=!0)):d=!0;break;default:j=
f.info,a.runStats("log",13)}h()})}else j=k[1]}break;case "username":var p=!0,n=a.getVal("password",!0),k=g.match(a.domainReg),s=!1;g==""||g==a.tips.username.txt?(j="\u8bf7\u8f93\u5165\u90ae\u4ef6\u5730\u5740\u3002",a.runStats("log",1)):a.domainReg.test(g)?g==n||k&&k[1]&&k[1]==n?(j="\u4e0d\u80fd\u4e0e\u5bc6\u7801\u76f8\u540c",a.runStats("log",8)):(n!=""&&a.getO("password",!0).triggerHandler("blur"),(k=g.match(a.domainReg))&&k.length==3&&a.mail[k[2]]&&a.mail[k[2]][1]==1?(k=g.replace("@"+k[2],""),k=
F(k),k[0]?(p=!1,s=!0):j=k[1]):p=!1):(j="\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u4ef6\u5730\u5740\u3002",a.runStats("log",9));if(!p&&(i||a.progress.chkUser==0))a.progress.chkUser=1,f=!0,a.get("checkUserName","userName="+g,function(){a.progress.chkUser=0;var b=nie.util.bigUrs.data[a.dataID].checkUserName;switch(b.status){case 104:d=!0;b.subStatus==1&&a.runStats("log",10);break;case 200:if(s){switch(a.type){case 1:j="\u8be5\u5e10\u53f7\u53ef\u76f4\u63a5\u767b\u5f55\u6e38\u620f\u3002";a.loginFn();
a.unionStats(!0);break;case 2:j="\u8be5\u90ae\u4ef6\u5730\u5740\u5df2\u662f\u7f51\u6613\u901a\u884c\u8bc1\u5e10\u6237\uff0c\u8bf7\u76f4\u63a5\u767b\u5f55\u3002",a.unionStats(!0)}a.runStats("log",14)}else j="\u8be5\u90ae\u4ef6\u5730\u5740\u5df2\u88ab\u6ce8\u518c\u3002",a.runStats("log",12),a.unionStats(!1);break;default:j=b.info,a.runStats("log",11)}h()});break;case "password":i=E();k=i.match(a.domainReg);g==""?(j="\u8bf7\u8bbe\u7f6e\u4f60\u7684\u901a\u884c\u8bc1\u767b\u5f55\u5bc6\u7801\u3002",a.runStats("log",
22)):g==i||k&&k[1]&&g==k[1]?(a.runStats("log",21),j="\u4e0d\u80fd\u548c\u7528\u6237\u540d\u76f8\u540c\u3002"):/^[\S]{6,16}$/i.test(g)?(d=!0,i=a.getO("repassword",!0),i.val()!=""&&i.triggerHandler("blur")):(a.runStats("log",20),j="\u8bf7\u8f93\u51656\u523016\u4e2a\u5b57\u7b26\u7684\u5bc6\u7801\u3002");break;case "repassword":g==""?(a.runStats("log",31),j="\u8bf7\u518d\u6b21\u8f93\u5165\u4f60\u7684\u8bbe\u7f6e\u5bc6\u7801\u3002"):g==a.getO("password",!0).val()?d=!0:(a.runStats("log",30),j="\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4\u3002");
break;case "captcha":var q=["\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801\u3002","\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9a8c\u8bc1\u7801\u3002"];a.type==1&&(q=["\u5fc5\u586b","\u4e0d\u6b63\u786e"]);if(g=="")j=q[0],a.runStats("log",71);else if(g.length<4||g.length>6)j=q[1],a.runStats("log",72);else if(i||a.progress.verCap==0)f=!0,a.progress.verCap=1,a.get("Verifier","val="+g,function(){a.progress.verCap=0;switch(nie.util.bigUrs.data[a.dataID].verCapResult){case 0:d=!0;break;case 1:j=q[1];loadCapImg();a.runStats("log",
70);break;case 2:j="\u5931\u8d25\u6b21\u6570\u591a\uff0c\u8bf7\u7a0d\u5019\u8f93\u5165\u3002",a.runStats("log",73)}h()})}f||v(l,e,d,j,m)};loadCapImg=function(){if(a.progress.loadCap==0)a.progress.loadCap=1,a.getO("captcha").removeClass("error right loading"),a.$(".qr-captcha .qrChk").removeClass("error right loading"),h.empty(),a.$img().css(a.capSize).click(function(){loadCapImg();a.runStats("log",74)}).load(function(){a.progress.loadCap=0;a.showCaptcha=!0;b(this).hide().appendTo(h).fadeIn("fast")}).error(function(){h.removeClass("loading").text("\u5237\u65b0\u8fc7\u591a\uff0c\u8bf7\u7a0d\u5019")}).attr("src",
a.serverPath+"Img?id="+a.id+"&promark="+a.promark+"&"+a.r())};loadCaptcha=function(f){if(a.progress.loadID==0)a.progress.loadID=1,s=a.r(),a.get("IdCreator","",function(){a.progress.loadID=0;a.t=(new Date).getTime();a.id=nie.util.bigUrs.data[a.dataID].id;a.$(".qrChangeCapBtn").attr(a.aData).click(function(){loadCapImg();a.runStats("log",75)});a.showCaptcha||loadCapImg();if(f&&b.isFunction(f.onComplete))f.onComplete()})};allInpFocus=function(f){a.showCaptcha||(e.show(),loadCaptcha({onComplete:function(){a.showCaptcha=
!0}}));if(typeof f!="undefined"){var f=b(this),c=a.tips[f.attr("name")];c&&f.val()==c.txt&&f.val("").removeClass(c["class"])}if(!a.hasTouch)a.hasTouch=!0,a.runStats("log",0)};a.promark=a.getVal("promark");switch(a.type){case 1:a.capSize.height=30;var A={xyq:"http://xyq.163.com/download/index.html",tx2:"http://tx2.163.com/reg/finish.html",csxy:"http://csxy.163.com/reg/client/",dtw:"http://dtw.163.com/download.html",xy3:"http://xy3.163.com/download/download.html",fj:"http://fj.163.com/download.html",
st:"http://st.163.com/yxxz/yxxz01.html",ball:"http://ball.163.com/",xyc:"http://xyc.netease.com/viewthread.php?tid=7666",rich:"http://rich.163.com/",zg:"http://server.zg.163.com/serverlist.php?from=niebar",sg:"http://client.sg.163.com/server_list.html",xjc:"http://game.xjc.163.com/"},y={pet:"cwwg",mc:"jlmc",dt2:"dtws",sg:"sgtx_web",zg:"ch",ff:"newff",pk:"xyw",tx3:"tx2",qn2:"qn"},q={},G=function(){for(var a=arguments,b=0,c=a.length;b<c;b++)if(typeof a[b]=="undefined")return!1;return!0},z=a.product?
a.product:nie.config.site?nie.config.site:window.location.href.replace(/^http:\/\/(.*)\.163\.com.*$/,"$1"),y=G(y[z])?y[z]:z,A=encodeURIComponent(G(A[z])?A[z]:"http://"+z+".163.com/download/"),q=q[y]?q[y]:"http://reg.163.com/reg/reg2.jsp?product="+y+"&url="+A+"&loginurl="+A;a.$(".createEmailBtn").attr("href",q);a.$("input.qrError").focus(function(){var f=b(this),c=f.attr("rel");f.addClass("qrHide");a.getO(c,!0).removeClass("qrHide").trigger("focus")});x=function(b){return a.$(".qr-"+b+" .qrChk")};
E=function(){return a.getVal("username")};v=function(b,e,i,d,l){c[b].pass=i;var b=a.$("input[rel="+b+"]"),g="right",h=g;i?(g="error",e.removeClass("qrHide"),b.addClass("qrHide")):(h="error",e.addClass("qrHide"),b.removeClass("qrHide").val(d));l.removeClass("loading "+g).addClass(h)};a.isShowCap&&(e.show(),loadCaptcha());break;case 2:D=function(b){var c=(a.userNameType=b)?".qr-username":".qr-createEmail";a.$(b?".qr-createEmail":".qr-username").removeClass("qrHide");a.$(c).addClass("qrHide")};o=a.$("select[name=domain]");
o.change(function(){inpFn("createEmail")});for(p in a.mail)a.mail[p][3]&&(q="@"+p,b("<option>").val(q).text(q).appendTo(o));a.$(".qrReg163Btn").attr(a.aData).click(function(){D(1)}).focus(function(){this.blur()});a.$(".qrRegOtherBtn").attr(a.aData).click(function(){D(0)}).focus(function(){this.blur()});getCurrentName=function(){return a.userNameType?"createEmail":"username"};x=function(b){if(b=="username"||b=="createEmail")b=getCurrentName();return a.$(".qr-"+b+" .qrChk")};E=function(){return a.getVal(getCurrentName())};
v=function(b,e,i,d,l){c[b=="username"&&a.userNameType?"createEmail":b].pass=i;b=Class2="right";if(i)b="error";else{if(d){var i=l.find("em span"),g=d.length;i.text(d);g*12>130&&i.css("width",g+"em")}Class2="error"}e.removeClass(b).addClass(Class2);l.removeClass("loading "+b).addClass(Class2)};e.show();loadCaptcha()}a.runStats("pv");a.runStats("clickSugRegBtn");b(".NIE-quickReg-loading").hide();a.form.show();n=a.$(".suggestDomain");suggestDomainCon=n.find("ul");for(p in a.tips)a.getO(p,!0).addClass(a.tips[p]["class"]).val(a.tips[p].txt);
b.each(c,function(b){this.pass=this.val=null;B.push("input[name="+b+"]");C.push(".qr-"+b);a.$(".qr-"+b+" .qrChk").html('<i class="right"></i><i class="error"></i><i class="loading"></i><em><b></b><span></span></em>')});a.send=function(c){a.runStats("log",100);var e=hasWating=!1;setTimeout(function(){e||(hasWating=!0,a.showMsg({msg:"\u63d0\u4ea4\u6570\u636e\u4e2d\uff0c\u8bf7\u7a0d\u540e...",url:null}))},3E3);var i=a.userNameType?a.getVal("createEmail")+o.val():a.getVal("username"),d="username="+i+
function(b){for(var g="",e=0,i=b.length;e<i;e++){var d=b[e],h=c&&d=="captcha"?a.msgO.reVerInp():a.getO(d,!0),h=h.length==0?"":h.val();h!=""&&(/^(password|realname|idno|activityid1|activityid2)$/.test(d)&&(h=encodeURIComponent(encodeURIComponent(h))),g+="&"+d+"="+h)}return g}(["captcha","password","mobile","activityid1","activityid2"]);c&&(d+="&pAnti=1");if(a.progress.submit==0)a.progress.submit=1,nie.util.bigUrs.data[a.dataID].result={},a.msgSize.current={},a.t=(new Date).getTime()-a.t,d+="&ot="+
parseInt(a.t/1E3),a.get_ssl("submit",d,function(){a.t=(new Date).getTime();a.progress.submit=0;s!=0&&a.runStats("regTime",a.r()-s);s=0;e=!0;a.hideMsg();var c=nie.util.bigUrs.data[a.dataID].result,f=c.num,d=f==200||f==201||f==202;d&&a.unionStats(f==200||f==201);a.runStats("log",d?101:102);f==2&&loadCapImg();hasWating&&(a.clearMsg(),a.hideMsg());a.regData={username:i,is163Mail:c.is163Mail,mailUrl:c.mailUrl};var h=c.num==107;a.msgSize.current=a.msgSize[!c.is163Mail&&d?"large":h?"reVer":"small"];b.isFunction(a.regComplete)&&
(a.regComplete({result:d,reVer:h,status:f,msg:c.msg.indexOf("\uff1b")==0?c.msg.replace("\uff1b",""):c.msg,url:c.reDirectUrl,data:c,username:i,is163Mail:c.is163Mail,mailUrl:c.mailUrl}),a.runStats("monitor",1));d&&a.form[0].reset()})};a.form.attr("action","#").submit(function(){if(m)a.reBindEvt(a.getO("username"),inpFn);else return!1;a.runStats("log",90);var f=0;c.promark.pass=a.promark!="";if(c.promark.pass)if(a.getO("agree").is(":checked")){var d=function(){f++;if(f==2){var b=a.userNameType?"username":
"createEmail",d;for(d in c)if(d!=b&&!c[d].pass){a.getO(d,!0).triggerHandler("focus");return}a.send(!1)}};(function(){allInpFocus();b.each(c,function(b){b!="promark"&&b!=(a.userNameType?"username":"createEmail")&&a.getO(b,!0).triggerHandler("blur",[d,!0])})})()}else alert("\u5fc5\u987b\u63a5\u53d7\u670d\u52a1\u6761\u6b3e\u624d\u80fd\u6ce8\u518c\u3002");else alert("\u6ce8\u518c\u5931\u8d25\uff0cpromark\u4e0d\u5b58\u5728")});var d={exist:!1,currentIndex:1,total:0,blur:function(){suggestDomainCon.find("li.hover").triggerHandler("click");
n.hide();m=!0;inpFn("username")},keyUp:function(c){c=c.which;if(c!=40&&c!=38&&c!=13){d.total=0;n.show();suggestDomainCon.empty().html("<li class='title'>\u8bf7\u9009\u62e9\u6216\u7ee7\u7eed\u8f93\u5165...</li>");var e=b(this),i=e.val(),c=i.match(/^([\w-\.]+)@?/),h={},l=function(a,c){b("<li>",{click:function(){e.val(b(this).text());n.hide()},text:a}).hover(function(){var a=b(this);d.currentIndex=c;b("li",a.parent()).removeClass("hover");a.addClass("hover")}).appendTo(suggestDomainCon)};if(c){d.currentIndex=
1;d.total=0;for(var g in a.mail)a.mail[g][2]==1&&(h[c[1]+"@"+g]=!0);for(g in h)g.toLowerCase().indexOf(i.toLowerCase())==0&&(l(g,d.total),d.total++)}if(d.total<5&&(c=i.match(/^([\w-\.]+)@([\S]+)/)))for(g in a.mail)i=g.toLowerCase(),i.indexOf(c[2].toLowerCase())==0&&!h[c[1]+"@"+i]&&(l(c[1]+"@"+g,d.total),d.total++);d.total==0?(m=!0,d.exist=!1,a.reBindEvt(e,d.blur),n.hide()):(m=!1,d.exist=!0,e.triggerHandler("focus"),a.reBindEvt(e,d.blur),suggestDomainCon.find("li:eq(1)").addClass("hover"))}},keyDown:function(a){if(d.exist){var c=
function(){suggestDomainCon.find("li").removeClass("hover");suggestDomainCon.find("li:eq("+d.currentIndex+")").addClass("hover")};switch(a.which){case 40:d.currentIndex+1<=d.total&&d.currentIndex++;c();break;case 38:d.currentIndex!=1&&d.currentIndex--;c();break;case 13:n.css("display")=="block"?(b(this),suggestDomainCon.find("li.hover").triggerHandler("click"),n.hide(),m=!1):m=!0}}}};a.$(B.join(",")).focus(allInpFocus).blur(inpFn);a.$(C.join(",")).focusin(function(){b(this).addClass("qrHover")}).focusout(function(){b(this).removeClass("qrHover")});
a.getO("username").keyup(d.keyUp).keydown(d.keyDown)};return a}}})(jQuery);
